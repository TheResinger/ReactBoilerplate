{"version":3,"sources":["Services/AuthService.js","Context/AuthContext.js","Components/Navbar.js","Components/Home.js","Components/Message.js","Components/Login.js","Components/Register.js","Components/TodoItem.js","Services/TodoService.js","Components/Todos.js","Components/Admin.js","hocs/PrivateRoute.js","hocs/UnPrivateRoute.js","App.js","index.js"],"names":["user","fetch","method","body","JSON","stringify","headers","then","res","status","json","data","isAuthenticated","username","role","AuthContext","createContext","children","useState","setUser","setIsAuthenticated","isLoaded","setIsLoaded","useEffect","AuthService","Provider","value","NavBar","props","useContext","onClickLogoutHandler","success","className","to","id","type","onClick","Home","getStyle","baseClass","message","msgError","Message","msgBody","Login","password","setMessage","authContext","onChange","event","target","name","onSubmit","preventDefault","history","push","htmlFor","placeholder","Register","timerID","useRef","clearTimeout","setTimeout","TodoItem","todo","response","Todos","prop","setTodo","todos","setTodos","TodoService","resetForm","map","key","_id","getData","Admin","PrivateRoute","Component","component","roles","rest","render","includes","pathname","state","from","location","UnPrivateRoute","App","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dd729604.chunk.js","sourcesContent":["export default {\r\n  login: user => {\r\n    return fetch('/user/login', {\r\n      method: 'post',\r\n      body: JSON.stringify(user),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(res => {\r\n      if (res.status !== 401) return res.json().then(data => data);\r\n      else return { isAuthenticated: false, user: { username: '', role: '' } };\r\n    });\r\n  },\r\n  register: user => {\r\n    return fetch('/user/register', {\r\n      method: 'post',\r\n      body: JSON.stringify(user),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => data);\r\n  },\r\n  logout: () => {\r\n    return fetch('/user/logout')\r\n      .then(res => res.json())\r\n      .then(data => data);\r\n  },\r\n  isAuthenticated: () => {\r\n    return fetch('/user/authenticated').then(res => {\r\n      if (res.status !== 401) return res.json().then(data => data);\r\n      else return { isAuthenticated: false, user: { username: '', role: '' } };\r\n    });\r\n  },\r\n};\r\n","import React, { createContext, useState, useEffect } from 'react';\r\nimport AuthService from '../Services/AuthService';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport default ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n  useEffect(() => {\r\n    AuthService.isAuthenticated().then(data => {\r\n      setUser(data.user);\r\n      setIsAuthenticated(data.isAuthenticated);\r\n      setIsLoaded(true);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {!isLoaded ? (\r\n        <h1>Loading</h1>\r\n      ) : (\r\n        <AuthContext.Provider\r\n          value={{ user, setUser, isAuthenticated, setIsAuthenticated }}\r\n        >\r\n          {children}\r\n        </AuthContext.Provider>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthService from '../Services/AuthService';\r\nimport { AuthContext } from '../Context/AuthContext';\r\n\r\n\r\n\r\nconst NavBar = props => {\r\n    const { isAuthenticated, user, setIsAuthenticated, setUser } = useContext(AuthContext);\r\n\r\n    const onClickLogoutHandler = () => {\r\n        AuthService.logout().then(data => {\r\n            if(data.success){\r\n                setUser(data.user);\r\n                setIsAuthenticated(false);\r\n            };\r\n        });\r\n    }\r\n\r\n    const unauthenticatedNavBar = () => {\r\n        return (\r\n            <>\r\n                <Link to=\"/\">\r\n                    <li className=\"nav-item nav-link\"> Home </li>\r\n                </Link>\r\n                <Link to=\"/login\">\r\n                    <li className=\"nav-item nav-link\"> Login </li>\r\n                </Link>\r\n                <Link to=\"/register\">\r\n                    <li className=\"nav-item nav-link\"> Register </li>\r\n                </Link>\r\n            </>\r\n        )\r\n    }\r\n    const authenticatedNavBar = () => {\r\n        return (\r\n            <>\r\n                <Link to=\"/\">\r\n                    <li className=\"nav-item nav-link\"> Home </li>\r\n                </Link>\r\n                <Link to=\"/todos\">\r\n                    <li className=\"nav-item nav-link\"> Todos </li>\r\n                </Link>\r\n                {\r\n                    user.role === \"admin\" ? <Link to=\"/admin\"><li className=\"nav-item nav-link\"> Admin </li></Link> : null\r\n                }\r\n                <button type=\"button\" className=\"btn btn-link nav-item nav-link\" onClick={ onClickLogoutHandler }> Logout </button>        \r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <nav className=\"navbar navbar-expand-lg navbar-light bg-light\">\r\n            <Link to=\"/\">\r\n                <div className=\"navbar-brand\">Resinger</div>\r\n            </Link>\r\n            <div className=\"collapse navbar-collapse\" id=\"navbarText\">\r\n                <ul className=\"navbar-nav mr-auto\">\r\n                    { !isAuthenticated ? unauthenticatedNavBar() : authenticatedNavBar()}\r\n                </ul>\r\n            </div>\r\n        </nav>\r\n    )\r\n}\r\n\r\nexport default NavBar;","import React from 'react';\r\n\r\nconst Home = () => <h1>Home Page</h1>;\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\nconst getStyle = props => {\r\n  let baseClass = 'alert ';\r\n  if (props.message.msgError) baseClass = baseClass + 'alert-danger';\r\n  else baseClass = baseClass + 'alert-primary';\r\n  return baseClass + ' text-center';\r\n};\r\n\r\nconst Message = props => {\r\n  return (\r\n    <div className={getStyle(props)} role=\"alert\">\r\n      {props.message.msgBody}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useState, useContext } from 'react';\r\nimport AuthService from '../Services/AuthService';\r\nimport Message from '../Components/Message';\r\nimport { AuthContext } from '../Context/AuthContext';\r\n\r\nconst Login = props => {\r\n  const [user, setUser] = useState({ username: '', password: '' });\r\n  const [message, setMessage] = useState(null);\r\n  const authContext = useContext(AuthContext);\r\n\r\n  const onChange = event => {\r\n    setUser({ ...user, [event.target.name]: event.target.value });\r\n  };\r\n\r\n  const onSubmitClick = event => {\r\n    event.preventDefault();\r\n    AuthService.login(user).then(data => {\r\n      const { isAuthenticated, user, message } = data;\r\n      if (isAuthenticated) {\r\n        authContext.setUser(user);\r\n        authContext.setIsAuthenticated(isAuthenticated);\r\n        props.history.push('/todos');\r\n      } else setMessage(message);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmitClick}>\r\n        <h3>Please Sign In</h3>\r\n        <label htmlFor=\"username\" className=\"sr-only\">\r\n          Username:{' '}\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"username\"\r\n          onChange={onChange}\r\n          className=\"form-control\"\r\n          placeholder=\"Enter Username\"\r\n        />\r\n        <label htmlFor=\"password\" className=\"sr-only\">\r\n          Password:{' '}\r\n        </label>\r\n        <input\r\n          type=\"password\"\r\n          name=\"password\"\r\n          onChange={onChange}\r\n          className=\"form-control\"\r\n          placeholder=\"Enter Password\"\r\n        />\r\n        <button className=\"btn btn-large btn-primary btn-block\" type=\"submit\">\r\n          Log In\r\n        </button>\r\n      </form>\r\n      {message ? <Message message={message} /> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport AuthService from '../Services/AuthService';\r\nimport Message from '../Components/Message';\r\n\r\nconst Register = props => {\r\n    const [ user, setUser ] = useState({ username : \"\", password : \"\", role : \"user\" });\r\n    const [ message, setMessage ] = useState(null);\r\n    let timerID = useRef(null);\r\n    \r\n    useEffect(() => {\r\n        return () => {\r\n            clearTimeout(timerID);\r\n        }\r\n    }, []);\r\n\r\n    const onChange = event => {\r\n        setUser({ ...user, [event.target.name] : event.target.value })\r\n    }\r\n    \r\n    const resetForm = () => {\r\n        setUser( { username: \"\", password: \"\", role: \"\" });\r\n    }\r\n\r\n    const onSubmitClick = event => {\r\n        event.preventDefault();\r\n        AuthService.register(user).then(data => {\r\n            const { message } = data;\r\n            setMessage(message);\r\n            resetForm();\r\n            if(!message.msgError){\r\n                timerID = setTimeout(() => {\r\n                    props.history.push('/login');\r\n                },2000)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <form onSubmit={onSubmitClick}>\r\n                <h3>Please Register</h3>\r\n                <label htmlFor=\"username\" className=\"sr-only\">Username: </label>\r\n                <input type=\"text\" name=\"username\" onChange={onChange} className=\"form-control\" placeholder=\"Enter Username\" value={user.username}/>\r\n                <label htmlFor=\"password\" className=\"sr-only\">Password: </label>\r\n                <input type=\"password\" name=\"password\" onChange={onChange} className=\"form-control\" placeholder=\"Enter Password\" value={user.password}/>\r\n                <button className=\"btn btn-large btn-primary btn-block\" type=\"submit\">Register</button>\r\n            </form>\r\n            { message ? <Message message={ message } /> : null }\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Register;","import React from 'react';\r\n\r\nconst TodoItem = props => {\r\n  return <li>{props.todo.name} </li>;\r\n};\r\n\r\nexport default TodoItem;\r\n","export default {\r\n  getTodos: () => {\r\n    return fetch('/user/todos').then(response => {\r\n      if (response.status !== 401) {\r\n        return response.json().then(data => data);\r\n      } else {\r\n        return { message: { msgBody: 'Unauthorized' }, msgError: true };\r\n      }\r\n    });\r\n  },\r\n  postTodo: todo => {\r\n    return fetch('/user/todo', {\r\n      method: 'post',\r\n      body: JSON.stringify(todo),\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(response => {\r\n      if (response.status !== 401) {\r\n        return response.json().then(data => data);\r\n      } else {\r\n        return { message: { msgBody: 'Unauthorized' }, msgError: true };\r\n      }\r\n    });\r\n  },\r\n};\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport TodoItem from './TodoItem';\r\nimport TodoService from '../Services/TodoService';\r\nimport { AuthContext } from '../Context/AuthContext';\r\nimport Message from './Message';\r\n\r\nconst Todos = prop => {\r\n  const [todo, setTodo] = useState({ name: '' });\r\n  const [todos, setTodos] = useState([]);\r\n  const [message, setMessage] = useState(null);\r\n  const authContext = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    TodoService.getTodos().then(data => {\r\n      setTodos(data.todos);\r\n    });\r\n  }, []);\r\n\r\n  const onSubmit = event => {\r\n    event.preventDefault();\r\n    TodoService.postTodo(todo).then(data => {\r\n      const { message } = data;\r\n      resetForm();\r\n      if (!message.msgError) {\r\n        TodoService.getTodos().then(getData => {\r\n          setTodos(getData.todos);\r\n          setMessage(message);\r\n        });\r\n      } else if (message.msgBody === 'Unauthorized') {\r\n        setMessage(message);\r\n        authContext.setUser({ username: '', role: '' });\r\n        authContext.setIsAuthenticated(false);\r\n      } else {\r\n        setMessage(message);\r\n      }\r\n    });\r\n  };\r\n\r\n  const onChange = event => {\r\n    setTodo({ name: event.target.value });\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setTodo({ name: '' });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ul className=\"list-group\">\r\n        {todos.map(todo => {\r\n          return <TodoItem key={todo._id} todo={todo} />;\r\n        })}\r\n      </ul>\r\n      <br />\r\n      <form onSubmit={onSubmit}>\r\n        <label htmlFor=\"Todo\">Enter Todo</label>\r\n        <input\r\n          type=\"text\"\r\n          name=\"todo\"\r\n          value={todo.name}\r\n          onChange={onChange}\r\n          className=\"form-control\"\r\n          placeholder=\"Please Enter Todo\"\r\n        ></input>\r\n        <button className=\"btn btn-lg btn-primary btn-block\" type=\"submit\">\r\n          Submit\r\n        </button>\r\n      </form>\r\n      {message ? <Message message={message} /> : null}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Todos;\r\n","import React from 'react';\r\n\r\nconst Admin = () => <h1>Admin Page</h1>;\r\n\r\nexport default Admin;\r\n","import React, { useContext } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { AuthContext } from '../Context/AuthContext';\r\n\r\nconst PrivateRoute = ({ component: Component, roles, ...rest }) => {\r\n  const { isAuthenticated, user } = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (!isAuthenticated)\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: '/login', state: { from: props.location } }}\r\n            />\r\n          );\r\n        if (!roles.includes(user.role))\r\n          return (\r\n            <Redirect\r\n              to={{ pathname: '/', state: { from: props.location } }}\r\n            />\r\n          );\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { useContext } from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\nimport { AuthContext } from '../Context/AuthContext';\r\n\r\nconst UnPrivateRoute = ({ component: Component, ...rest }) => {\r\n  const { isAuthenticated } = useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={props => {\r\n        if (isAuthenticated)\r\n          return (\r\n            <Redirect to={{ pathname: '/', state: { from: props.location } }} />\r\n          );\r\n        return <Component {...props} />;\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default UnPrivateRoute;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\r\n\r\nimport NavBar from './Components/Navbar';\r\nimport Home from './Components/Home';\r\nimport Login from './Components/Login';\r\nimport Register from './Components/Register';\r\nimport Todos from './Components/Todos';\r\nimport Admin from './Components/Admin';\r\nimport PrivateRoute from './hocs/PrivateRoute';\r\nimport UnPrivateRoute from './hocs/UnPrivateRoute';\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <NavBar />\r\n      <Route exact path=\"/\" component={Home} />\r\n      <UnPrivateRoute path=\"/login\" component={Login} />\r\n      <UnPrivateRoute path=\"/register\" component={Register} />\r\n      <PrivateRoute path=\"/todos\" roles={['user', 'admin']} component={Todos} />\r\n      <PrivateRoute path=\"/admin\" roles={['admin']} component={Admin} />\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport AuthProvider from './Context/AuthContext';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <AuthProvider>\r\n      <App />\r\n    </AuthProvider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}